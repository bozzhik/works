---
import {getCollection} from 'astro:content'

const data = await getCollection('portfolio')
---

<section data-section="PROJECTS" class="w-[80%] sm:w-[90%] mx-auto mb-32 pt-[13vh]">
  <div id="PROJECTS_CARDS" class="grid grid-cols-2 gap-10 sm:grid-cols-1">
    {
      data
        .filter((i) => i.data.type === 'project')
        .sort((a, b) => a.data.position - b.data.position)
        .map((i) => (
          <a href={i.data.link} target={i.data.external_target ? '_blank' : '_self'} class="flex flex-col items-center rounded-[35px] sm:rounded-[20px] overflow-hidden border-[1px] border-custom-gray-1 border-b-0">
            <img class="object-cover object-top w-full h-auto" src={i.data.image} alt={i.data.title} />
            <div class="flex flex-col justify-center items-center text-center text-custom-light-1 max-w-[70%] sm:max-w-[100%] sm:p-4 sm:pb-8 pt-4 px-8 pb-14 mt-auto">
              <h4 class="text-3xl font-medium sm:text-2xl">{i.data.title}</h4>
              <p class="mt-4 text-sm sm:mt-3">{i.data.description}</p>
            </div>
          </a>
        ))
    }
  </div>
</section>

<style>
  a {
    background: linear-gradient(127deg, rgba(157, 157, 158, 0.11) 29%, rgba(17, 18, 27, 0) 100%);
  }
</style>
